<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>(re)quiz</title>

<style>
:root {
  --neon: #a855f7;
  --bg: #0b0615;
  --card: #140a26;
  --text: #e9d5ff;
  --good: #22c55e;
  --bad: #ef4444;
}

* { box-sizing: border-box; font-family: Inter, system-ui, sans-serif; }

body {
  margin: 0;
  background: radial-gradient(circle at top, #1e0b3a, var(--bg));
  color: var(--text);
  min-height: 100vh;
  display: flex;
  justify-content: center;
  padding: 20px;
}

.container {
  width: 100%;
  max-width: 820px;
  background: var(--card);
  border-radius: 18px;
  padding: 28px;
  box-shadow: 0 0 40px rgba(168,85,247,.25);
}

h1 {
  text-align: center;
  color: var(--neon);
  text-shadow: 0 0 12px var(--neon);
}

.subtitle {
  text-align: center;
  opacity: .8;
  margin-bottom: 30px;
}

input[type=text] {
  width: 100%;
  padding: 14px;
  border-radius: 12px;
  border: 1px solid #2e1065;
  background: #0f0820;
  color: white;
  font-size: 16px;
  margin-bottom: 20px;
}

.question {
  margin-bottom: 26px;
}

.option {
  display: block;
  padding: 12px 14px;
  border-radius: 12px;
  background: #0f0820;
  border: 1px solid #2e1065;
  margin-bottom: 10px;
  cursor: pointer;
  transition: .2s;
}

.option.correct {
  border-color: var(--good);
  box-shadow: 0 0 20px rgba(34,197,94,.8);
  animation: pulse 0.6s ease;
}

.option.wrong {
  border-color: var(--bad);
  box-shadow: 0 0 20px rgba(239,68,68,.8);
  animation: shake 0.4s ease;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.03); }
  100% { transform: scale(1); }
}

@keyframes shake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-4px); }
  50% { transform: translateX(4px); }
  75% { transform: translateX(-4px); }
  100% { transform: translateX(0); }
}

button {
  width: 100%;
  padding: 16px;
  border-radius: 14px;
  border: none;
  font-size: 18px;
  cursor: pointer;
  background: linear-gradient(135deg, #9333ea, #c084fc);
  color: #140a26;
  font-weight: 700;
  box-shadow: 0 0 25px rgba(168,85,247,.6);
  margin-top: 10px;
}

.result {
  text-align: center;
  display: none;
}

canvas {
  width: 100%;
  margin-top: 20px;
  border-radius: 14px;
  box-shadow: 0 0 30px rgba(168,85,247,.5);
}
</style>
</head>

<body>
<div class="container">

<h1>(re)quiz</h1>
<div class="subtitle">Test your Re Protocol knowledge</div>

<input id="nickname" type="text" placeholder="Enter your nickname" />

<div id="quiz"></div>

<button onclick="finishQuiz()">Finish quiz</button>

<div class="result" id="result">
  <h2>ðŸŽ‰ Quiz completed</h2>
  <p id="scoreText"></p>
  <canvas id="certificate"></canvas>
  <button onclick="downloadCert()">Download certificate</button>
</div>

</div>

<script>
const questions = [
 { q:"What is the main purpose of Re Protocol?", a:["Mint new stablecoins","Provide insurance for retail users","Generate yield using reinsurance contracts","Facilitate cross-chain swaps"], c:2 },
 { q:"What is Re Protocol?", a:["A centralized insurance company","A decentralized reinsurance yield platform","dex","A lending protocol"], c:1 },
 { q:"Which assets can be deposited into Re Protocol?", a:["Only ETH","Only fiat currencies","Stablecoins such as USDC, DAI, USDe, sUSDe","NFTs"], c:2 },
 { q:"What are Insurance Capital Layers (ICLs)?", a:["Governance layers","Smart contract vaults allocating capital","Layer-2 networks","Insurance policies for users"], c:1 },
 { q:"What is reUSD?", a:["A governance token","A volatile yield token","A principal-protected, yield-accruing USD token","A synthetic leverage product"], c:2 },
 { q:"What is reUSDe?", a:["A stable, risk-free token","A governance asset","A performance token that absorbs first-loss risk","A synthetic stablecoin"], c:2 },
 { q:"What is the target net annual return for reUSDe?", a:["3â€“5%","6â€“8%","10â€“12%","16â€“25%"], c:3 },
 { q:"How does reUSDe pricing and redemption work?", a:["Real-time redemption","Daily mint and burn","Price compounds daily off a quarterly-refreshed tNAV, with quarterly pro-rata redemptions","Fixed peg"], c:2 },
 { q:"What is the daily yield mechanism for reUSD?", a:["Fixed 10% APY","Daily price increases track the higher of 7-day SOFR + 250bps or Ethena sUSDe basis yield","Only on redemption","DAO votes"], c:1 },
 { q:"When is reUSDeâ€™s Target NAV refreshed?", a:["Daily","Weekly","Quarterly","Annually"], c:2 }
];

const quiz = document.getElementById("quiz");
let certID = "";

questions.forEach((q,i)=>{
  quiz.innerHTML += `
    <div class="question">
      <h3>${i+1}. ${q.q}</h3>
      ${q.a.map((o,idx)=>`
        <label class="option">
          <input type="radio" name="q${i}" value="${idx}"> ${o}
        </label>`).join("")}
    </div>`;
});

function finishQuiz() {
  const nick = nickname.value.trim();
  if(!nick) return alert("Enter nickname");

  let score = 0;

  questions.forEach((q,i)=>{
    const options = document.querySelectorAll(`input[name=q${i}]`);
    options.forEach(o=>{
      const label = o.parentElement;
      if(Number(o.value) === q.c) label.classList.add("correct");
      if(o.checked && Number(o.value) !== q.c) label.classList.add("wrong");
      if(o.checked && Number(o.value) === q.c) score++;
    });
  });

  scoreText.innerText = `Score: ${score} / 10`;
  result.style.display = "block";
  generateCertificate(nick, score);
}

function generateCertificate(nick, score) {
  const canvas = document.getElementById("certificate");
  const ctx = canvas.getContext("2d");
  const img = new Image();
  certID = crypto.randomUUID();
  img.src = "images/certificate.png";

  img.onload = () => {
    canvas.width = img.width;
    canvas.height = img.height;
    ctx.drawImage(img,0,0);

    ctx.fillStyle = "#a855f7";
    ctx.textAlign = "center";

    ctx.font = "bold 72px Inter";
    ctx.fillText(nick, canvas.width/2, 600);

    ctx.font = "40px Inter";
    ctx.fillText("(re)quiz", canvas.width/2, 690);
    ctx.fillText(`Score: ${score}/10`, canvas.width/2, 760);

    ctx.font = "28px monospace";
    ctx.fillText(`ID: ${certID}`, canvas.width/2, 830);

    ctx.font = "30px Inter";
    ctx.fillText(new Date().toLocaleDateString(), canvas.width/2, 900);
  };
}

function downloadCert() {
  const link = document.createElement("a");
  link.download = `(re)quiz_certificate_${certID}.png`;
  link.href = certificate.toDataURL("image/png");
  link.click();
}
</script>

</body>
</html>
